<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Free QR Code Generator (No Ads)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <style>
  #qrCodeContainer canvas,
  #qrCodeContainer img {
    margin: 0 auto;
    display: block;
  }
</style>
</head>
<body class="bg-light">
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-lg-6 col-md-8 col-sm-12">
      <h2 class="mb-4 text-center">Free QR Code Generator (No Ads)</h2>
      <form id="qrForm" class="mb-4">
        <div class="mb-3">
          <label for="urlInput" class="form-label"><strong>Enter URL:</strong></label>
          <input type="url" id="urlInput" class="form-control" placeholder="https://example.com" required />
        </div>
        <button type="submit" class="btn btn-primary">Generate QR Code</button>
      </form>

      <div id="qrCodeContainer" class="text-center mb-3"></div>
      <div class="text-center" id="downloadContainer"></div>

    </div>
  </div>
</div>

<script>
document.getElementById('qrForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const url = document.getElementById('urlInput').value.trim();
  if (!url) return;

  const qrContainer = document.getElementById('qrCodeContainer');
  const downloadContainer = document.getElementById('downloadContainer');

  qrContainer.innerHTML = '';
  downloadContainer.innerHTML = '';

  new QRCode(qrContainer, {
    text: url,
    width: 300,
    height: 300,
    correctLevel: QRCode.CorrectLevel.H
  });

  setTimeout(() => {
    const qrCanvas = qrContainer.querySelector('canvas');
    if (!qrCanvas) return;

    const margin = 20; // ‚Üê margin sebenar dalam PNG
    const size = qrCanvas.width + margin * 2;

    const finalCanvas = document.createElement('canvas');
    finalCanvas.width = size;
    finalCanvas.height = size;

    const ctx = finalCanvas.getContext('2d');

    // background putih
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, size, size);

    // lukis QR di tengah dengan margin
    ctx.drawImage(qrCanvas, margin, margin);

    const pngUrl = finalCanvas.toDataURL('image/png');

    const a = document.createElement('a');
    const hostname = new URL(url).hostname;

    a.href = pngUrl;
    a.download = hostname + '.png';
    a.className = 'btn btn-success mt-2';
    a.textContent = 'Download QR Code';

    downloadContainer.appendChild(a);
  }, 100);
});
</script>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
